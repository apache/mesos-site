<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta property="og:locale" content="en_US"/>
    <meta property="og:type" content="website"/>
    <meta property="og:title" content="Apache Mesos"/>
    <meta property="og:site_name" content="Apache Mesos"/>
    <meta property="og:url" content="http://mesos.apache.org/"/>
    <meta property="og:image" content="http://mesos.apache.org/assets/img/mesos_logo_fb_preview.png"/>
    <meta property="og:description"
          content="Apache Mesos abstracts resources away from machines,
                   enabling fault-tolerant and elastic distributed systems
                   to easily be built and run effectively."/>

    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:site" content="@ApacheMesos"/>
    <meta name="twitter:title" content="Apache Mesos"/>
    <meta name="twitter:image" content="http://mesos.apache.org/assets/img/mesos_logo_fb_preview.png"/>
    <meta name="twitter:description"
          content="Apache Mesos abstracts resources away from machines,
                   enabling fault-tolerant and elastic distributed systems
                   to easily be built and run effectively."/>

    <link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
    <link rel="alternate" type="application/atom+xml" title="Apache Mesos Blog" href="/blog/feed.xml">
    <link href="../../../../assets/css/main.css" rel="stylesheet" />


    <!-- Google Analytics Magic -->
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-20226872-1']);
    _gaq.push(['_setDomainName', 'apache.org']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
  </head>
  <body>
    <!-- magical breadcrumbs -->
    <div class="topnav">
      <div class="container">
        <ul class="breadcrumb">
          <li>
            <div class="dropdown">
              <a data-toggle="dropdown" href="#">Apache Software Foundation <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                <li><a href="http://www.apache.org">Apache Homepage</a></li>
                <li><a href="http://www.apache.org/licenses/">License</a></li>
                <li><a href="http://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
                <li><a href="http://www.apache.org/foundation/thanks.html">Thanks</a></li>
                <li><a href="http://www.apache.org/security/">Security</a></li>
              </ul>
            </div>
          </li>

          <li><a href="http://mesos.apache.org">Apache Mesos</a></li>
          <li><a href="/documentation
/">Documentation
</a></li>
        </ul><!-- /.breadcrumb -->
      </div><!-- /.container -->
    </div><!-- /.topnav -->

    <!-- navbar excitement -->
<div class="navbar navbar-default navbar-static-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#mesos-menu" aria-expanded="false">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/"><img src="/assets/img/mesos_logo.png" alt="Apache Mesos logo"/></a>
    </div><!-- /.navbar-header -->

    <div class="navbar-collapse collapse" id="mesos-menu">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="/getting-started/">Getting Started</a></li>
        <li><a href="/blog/">Blog</a></li>
        <li><a href="/documentation/latest/">Documentation</a></li>
        <li><a href="/downloads/">Downloads</a></li>
        <li><a href="/community/">Community</a></li>
      </ul>
    </div><!-- /#mesos-menu -->
  </div><!-- /.container -->
</div><!-- /.navbar -->

<div class="content">
  <div class="container">
    <div class="row-fluid">
  <div class="col-md-4">
    <h4>If you're new to Mesos</h4>
    <p>See the <a href="/getting-started/">getting started</a> page for more
       information about downloading, building, and deploying Mesos.</p>

    <h4>If you'd like to get involved or you're looking for support</h4>
    <p>See our <a href="/community/">community</a> page for more details.</p>
  </div>
  <div class="col-md-8">
    <h1>Linux Capabilities Support in Mesos Containerizer</h1>

<p>This document describes the <code>linux/capabilities</code> isolator. The
isolator adds support for controlling <a href="http://man7.org/linux/man-pages/man7/capabilities.7.html">Linux
Capabilities</a>
of containers launched using the
<a href="/documentation/latest/isolators/../mesos-containerizer/">MesosContainerizer</a></p>

<p>The Linux capabilities isolator allows operators to control which
privileged operations Mesos tasks may perform. Operators can specify
which capabilities to allow for containers executing on an agent;
containers on the other hand can expose which capabilities they need.</p>

<p>See the protobuf definition of <code>CapabilityInfo::Capability</code> for the
list of currently exposed capabilities.</p>

<h2>Agent setup</h2>

<p>The Linux capabilities isolator is loaded when <code>linux/capabilities</code> is
present in the agent&rsquo;s <code>--isolation</code> flag.  This isolator requires the
<code>CAP_SETPCAP</code> capability so agent processes typically need to be started
as root.</p>

<p>The <code>--effective_capabilities</code> flag specifies a set of capabilities that
are always granted to tasks. If the running kernel (Linux 4.3 or later)
supports ambient capabilities, these capabilities will be added to the
effective capability set of the task when it is launched. Otherwise
they must be re-acquired by arranging for the task to execute a file
with the relevant file-based capabilities enabled.</p>

<p>In the absence of capabilities specified by the scheduler, an empty list
for <code>--effective_capabilities</code> signifies that all capabilities will
be explicitly dropped.  If the <code>--effective_capabilities</code> flag is not
present, the task will be launched with the default capabilities of the
task user but the ambient capabilities will not be set.</p>

<p>The <code>--bounding_capabilities</code> flag specifies an upper bound on the
the capabilities a task is allowed to acquire or be granted.
Schedulers are not allowed to launch tasks with capabilities outside
the set specified by the <code>--bounding_capabilities</code> flag, but may
specify effective or bounding capabilities that are within this
set.</p>

<p>An empty list for <code>--bounding_capabilities</code> signifies that no capabilities
are allowed, while an absent <code>--bounding_capabilities</code> flag signifies
that all capabilities are allowed.</p>

<p>A possible agent startup invocation could be</p>

<pre><code class="{.console}">sudo mesos-agent --master=&lt;master ip&gt; --ip=&lt;agent ip&gt;
  --work_dir=/var/lib/mesos
  --isolation=linux/capabilities[,other isolation flags]
  --effective_capabilities='{"capabilities":["NET_RAW","MKNOD"]}'
  --bounding_capabilities='{"capabilities":["NET_RAW","MKNOD","SYSLOG"]}'
</code></pre>

<h2>Task setup</h2>

<p>In order for a Mesos task to acquire specific effective capabilities
or limit its bounding capabilities it should declare the required
capabilities in the <code>LinuxInfo</code> element of its <code>ContainerInfo</code>.</p>

<p>A Mesos task can only request capabilities which are allowed according
to the <code>--bounding_capabilities</code> flag of the agent; a task requesting
other capabilities will be rejected. When the <code>--bounding_capabilities</code>
flag is not present, all capability requests will be granted.</p>

<p>If the optional <code>effective_capabilities</code> field is not set, the value
of the <code>--effective_capabilities</code> flag will be used to populate the
task capabilities. If the optional <code>bounding_capabilities</code> field
is not set, the value of the <code>--bounding_capabilities</code> flag will
be used to populate the task capabilities. In both case, if an empty
list of capabilities is given, the Mesos task will drop all
capabilities in the corresponding set.</p>

  </div>
</div>

  </div><!-- /.container -->
</div><!-- /.content -->

<hr>



    <!-- footer -->
    <div class="footer">
      <div class="container">

        <div class="col-md-3">
            <a  href="https://www.apache.org/events/current-event.html">
              <img src="https://www.apache.org/events/current-event-234x60.png"/>
            </a>
        </div>

        <div class="col-md-3 social-blk">
          <span class="social">
            <a href="https://twitter.com/ApacheMesos"
              class="twitter-follow-button"
              data-show-count="false" data-size="large">Follow @ApacheMesos</a>
            <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
            <a href="https://twitter.com/intent/tweet?button_hashtag=mesos"
              class="twitter-hashtag-button"
              data-size="large"
              data-related="ApacheMesos">Tweet #mesos</a>
            <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
          </span>
        </div>

        <div class="col-md-6 trademark">
          <p>&copy; 2012-2018 <a href="http://apache.org">The Apache Software Foundation</a>.
            Apache Mesos, the Apache feather logo, and the Apache Mesos project logo are trademarks of The Apache Software Foundation.
          <p>
        </div>

      </div><!-- /.container -->
    </div><!-- /.footer -->

    <!-- JS -->
    <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js"></script>

    <!-- Inject anchors for all headings on the page, see https://www.bryanbraun.com/anchorjs. -->
    <script type="text/javascript">
    anchors.options = {
      placement: 'right',
      ariaLabel: 'Permalink',
    };

    // The default is to not add anchors to h1, but we have pages with multiple h1 headers,
    // and we do want to put anchors on those.
    anchors.add('h1, h2, h3, h4, h5, h6');
    </script>
  </body>
</html>
