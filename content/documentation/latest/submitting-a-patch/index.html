<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Apache Mesos - Submitting a Patch</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta property="og:locale" content="en_US"/>
    <meta property="og:type" content="website"/>
    <meta property="og:title" content="Apache Mesos"/>
    <meta property="og:site_name" content="Apache Mesos"/>
    <meta property="og:url" content="http://mesos.apache.org/"/>
    <meta property="og:image" content="http://mesos.apache.org/assets/img/mesos_logo_fb_preview.png"/>
    <meta property="og:description"
          content="Apache Mesos abstracts resources away from machines,
                   enabling fault-tolerant and elastic distributed systems
                   to easily be built and run effectively."/>

    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:site" content="@ApacheMesos"/>
    <meta name="twitter:title" content="Apache Mesos"/>
    <meta name="twitter:image" content="http://mesos.apache.org/assets/img/mesos_logo_fb_preview.png"/>
    <meta name="twitter:description"
          content="Apache Mesos abstracts resources away from machines,
                   enabling fault-tolerant and elastic distributed systems
                   to easily be built and run effectively."/>

    <link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
    <link rel="alternate" type="application/atom+xml" title="Apache Mesos Blog" href="/blog/feed.xml">
    <link href="../../../assets/css/main.css" media="screen" rel="stylesheet" type="text/css" />

    

    <!-- Google Analytics Magic -->
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-20226872-1']);
    _gaq.push(['_setDomainName', 'apache.org']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
    
  </head>
  <body>
    <!-- magical breadcrumbs -->
    <div class="topnav">
      <div class="container">
        <ul class="breadcrumb">
          <li>
            <div class="dropdown">
              <a data-toggle="dropdown" href="#">Apache Software Foundation <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                <li><a href="http://www.apache.org">Apache Homepage</a></li>
                <li><a href="http://www.apache.org/licenses/">License</a></li>
                <li><a href="http://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
                <li><a href="http://www.apache.org/foundation/thanks.html">Thanks</a></li>
                <li><a href="http://www.apache.org/security/">Security</a></li>
              </ul>
            </div>
          </li>

          <li><a href="http://mesos.apache.org">Apache Mesos</a></li>
          
          
          <li><a href="/documentation
/">Documentation
</a></li>
          
          
        </ul><!-- /.breadcrumb -->
      </div><!-- /.container -->
    </div><!-- /.topnav -->

    <!-- navbar excitement -->
<div class="navbar navbar-default navbar-static-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#mesos-menu" aria-expanded="false">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/"><img src="/assets/img/mesos_logo.png" alt="Apache Mesos logo"/></a>
    </div><!-- /.navbar-header -->

    <div class="navbar-collapse collapse" id="mesos-menu">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="/gettingstarted/">Getting Started</a></li>
        <li><a href="/blog/">Blog</a></li>
        <li><a href="/documentation/latest/">Documentation</a></li>
        <li><a href="/downloads/">Downloads</a></li>
        <li><a href="/community/">Community</a></li>
      </ul>
    </div><!-- /#mesos-menu -->
  </div><!-- /.container -->
</div><!-- /.navbar -->

<div class="content">
  <div class="container">
    <div class="row-fluid">
  <div class="col-md-4">
    <h4>If you're new to Mesos</h4>
    <p>See the <a href="/gettingstarted/">getting started</a> page for more
       information about downloading, building, and deploying Mesos.</p>

    <h4>If you'd like to get involved or you're looking for support</h4>
    <p>See our <a href="/community/">community</a> page for more details.</p>
  </div>
  <div class="col-md-8">
    <h1>Submitting a Patch</h1>

<ul>
<li>You&rsquo;ve fixed a bug or added a feature and want to contribute it. AWESOME!</li>
<li>We use <a href="https://issues.apache.org/jira/browse/mesos/">Apache Software Foundation JIRA</a> to track and manage issues. If you don&rsquo;t already have an account, you&rsquo;ll need to create one.</li>
<li>We use <a href="https://reviews.apache.org">Apache Review Board</a> for code reviews. If you don&rsquo;t already have an account, you&rsquo;ll need to create one (it&rsquo;s separate from your Apache JIRA account).</li>
<li>Once your JIRA and Review Board accounts are in place please go ahead and create a review or GitHub pull request with an entry for yourself in <a href="https://github.com/apache/mesos/blob/master/docs/contributors.yaml">contributors.yaml</a> file.

<ul>
<li>The file is used to map contributions to the JIRA and Review Board accounts of their respective authors. We also use this mapping to track contributions of various organizations to Apache Mesos.</li>
<li>Feel free to omit the <code>affiliations</code> field out in case you do not want your contribution to be atributed to a particular organization.</li>
<li>In the <code>email</code> field please specify the email that your local git client is setup with.</li>
</ul>
</li>
<li>A code review request should be created for every JIRA that involves a change to the codebase.</li>
</ul>


<h3>Before you start writing code</h3>

<ol>
<li><p>Check out the code from the Apache repository via Git. Instructions are on the <a href="http://mesos.apache.org/gettingstarted/">Getting Started</a> page.</p></li>
<li><p>Join the dev, issues, reviews and builds mailing lists by sending emails to <a href="mailto:dev-subscribe@mesos.apache.org">dev-subscribe@mesos.apache.org</a>, <a href="mailto:issues-subscribe@mesos.apache.org">issues-subscribe@mesos.apache.org</a>, <a href="mailto:reviews-subscribe@mesos.apache.org">reviews-subscribe@mesos.apache.org</a> and <a href="mailto:builds-subscribe@mesos.apache.org">builds-subscribe@mesos.apache.org</a> respectively.</p></li>
<li><p>Find a JIRA issue that is currently unassigned that you want to work on at <a href="https://issues.apache.org/jira/browse/MESOS">JIRA issue tracker</a>, or create your own (you&rsquo;ll need a JIRA account for this, see below)!</p>

<ol>
<li>This could be a JIRA representing a bug (possibly a bug that you encountered and reported, e.g. when trying to build) or a new feature.</li>
<li>Prefer working on issues marked as &ldquo;<a href="https://issues.apache.org/jira/browse/MESOS-1?jql=project%20%3D%20MESOS%20AND%20status%20%3D%20Accepted">Accepted</a>&rdquo;, rather than merely &ldquo;Open&rdquo;. If an issue has been accepted, it means at least one Mesos developer thought that the ideas proposed in the issue are worth pursuing further.</li>
<li>Issues marked with the &ldquo;<a href="https://issues.apache.org/jira/browse/MESOS-1?jql=project%20%3D%20MESOS%20AND%20status%20%3D%20Accepted%20AND%20labels%20%3D%20newbie">newbie</a>&rdquo; label can be good candidates for &ldquo;starter&rdquo; projects.</li>
</ol>
</li>
<li><p>Assign the JIRA to yourself.</p>

<ol>
<li>You will be able to assign the JIRA to yourself as soon as your pull request with additions to the contributors.yaml file is merged.</li>
</ol>
</li>
<li><p>Formulate a plan for resolving the issue. Propose your plan via comments in the JIRA.</p></li>
<li><p>Find a <strong>shepherd</strong> to collaborate on your patch. A shepherd is a Mesos committer that will work with you to give you feedback on your proposed design, and to eventually commit your change into the Mesos source tree.</p>

<ol>
<li>To find a shepherd, email the dev mailing list (include a link to your JIRA issue). You can also try asking by adding a comment to your JIRA issue.</li>
<li>You can also find a shepherd by asking the developers on IRC (in the <a href="irc://irc.freenode.net/mesos">mesos channel</a> on <a href="https://freenode.net">Freenode</a>). You can find the current list of committers <a href="/documentation/latest/./committers/">here</a>: a developer that has previously worked on the component you are modifying might be a good candidate shepherd.</li>
</ol>
</li>
</ol>


<h3>Create your patch</h3>

<ol>
<li><p>Create one or more test cases to exercise the bug or the feature (the Mesos team uses <a href="http://en.wikipedia.org/wiki/Test-driven_development">test-driven development</a>). Before you start coding, make sure these test cases all fail.</p>

<ol>
<li>The <a href="/documentation/latest/./testing-patterns/">testing patterns</a> page has some suggestions for writing test cases.</li>
</ol>
</li>
<li><p>Make your changes to the code (using whatever IDE/editor you choose) to actually fix the bug or implement the feature.</p>

<ol>
<li>Before beginning, please read the <a href="/documentation/latest/./c++-style-guide/">Mesos C++ Style Guide</a>. It is recommended to use the git pre-commit hook (<code>support/hooks/pre-commit</code>) to automatically check for style errors. See the hook script for instructions to enable it.</li>
<li>Most of your changes will probably be to files inside of <code>BASE_MESOS_DIR</code></li>
<li>From inside of the root Mesos directory: <code>./bootstrap</code> (Only required if building from git repository).</li>
<li>To build, we recommend that you don&rsquo;t build inside of the src directory. We recommend you do the following:

<ol>
<li>From inside of the root Mesos directory: <code>mkdir build &amp;&amp; cd build</code></li>
<li><code>../configure</code></li>
<li><code>make</code></li>
<li>Now all of the files generated by the build process will be contained in the build directory you created, instead of being spread throughout the src directory, which is a bit messier. This is both cleaner, and makes it easy to clean up if you want to get rid of the files generated by <code>configure</code> and <code>make</code>. I.e. You can reset your build process without risking changes you made in the src directory, by simply deleting the build directory, and creating a new one.</li>
</ol>
</li>
</ol>
</li>
<li><p>Make sure that all of the unit tests pass, including the new test cases you have added: <code>make check</code>.</p>

<ol>
<li>To build all tests without executing them, use something like: <code>make tests</code>.</li>
<li>To execute a single unit test (helpful when trying to debug a test case failure), use something like: <code>make check GTEST_FILTER="HTTPTest.Delete"</code>.</li>
</ol>
</li>
<li><p>Divide your change into one or more Git commits. Each commit should represent a single logical (atomic) change to the Mesos source code: this makes your changes easier to review. For more information, see the <a href="/documentation/latest/./effective-code-reviewing/">reviewer guidelines</a>.</p>

<ol>
<li>Try to avoid including other, unrelated cleanups (e.g., typo fixes or style nits) in the same commit that makes functional changes. While typo fixes are great, including them in the same commit as functional changes makes the commit history harder to read.</li>
<li>Developers often make incremental commits to save their progress when working on a change, and then &ldquo;rewrite history&rdquo; (e.g., using <code>git rebase -i</code>) to create a clean set of commits once the change is ready to be reviewed.</li>
<li>Commit messages should be in past tense. The first sentence should summarize the change; it should start with a capital letter, not exceed 72 characters and end in a period.</li>
</ol>
</li>
<li><p>Make sure to pull in any changes that have been committed to master branch. Using Git, do this via something like:</p>

<ol>
<li><code>git checkout master</code></li>
<li><code>git pull</code></li>
<li><code>git checkout my_branch</code></li>
<li>Check the output of <code>git diff master</code> and make sure it lists only your changes. If other changes you did not make are listed, try <code>git rebase master</code> to bring your branch up to date with master.</li>
</ol>
</li>
</ol>


<h3>Submit your patch</h3>

<ol>
<li><p>You&rsquo;re ready to submit your patch for review!</p>

<ol>
<li>Log in or create an account at <a href="http://reviews.apache.org">Apache Review Board</a>.</li>
<li>The easiest (and recommended) way to submit reviews is through <code>post-reviews.py</code> a wrapper around post-review.</li>
<li>First, install RBTools. <a href="https://www.reviewboard.org/docs/rbtools/dev/">See Instructions</a>.</li>
<li>Configure post-review. The easiest method is to symlink to the sample config: <code>ln -s support/reviewboardrc .reviewboardrc</code>.</li>
<li>Log into Review Board from the command line: run <code>rbt status</code>.</li>
<li>From your local branch run <code>support/post-reviews.py</code>.</li>
<li>Note that <code>post-reviews.py</code> creates a new review for every commit on your branch that is different from the <code>master</code>.</li>
<li>Be sure to add your JIRA issue id (e.g. MESOS-1) to the field labeled &ldquo;Bugs&rdquo; (this will automatically link).</li>
<li>Add your shepherd under the &ldquo;People&rdquo; field, in the &ldquo;Reviewers&rdquo; section. You should also include other Mesos community members who have contributed to the discussion of your proposed change.</li>
<li> Under &ldquo;Description&rdquo; in addition to details about your changes, include a description of any documentation pages that need to be added, or are affected by your changes (e.g. did you change or add any configuration options/flags? Did you add a new binary?)</li>
<li> Under &ldquo;Testing Done&rdquo;, explain what new tests you have created, what tests were modified, and what procedures you went through to test your changes.</li>
</ol>
</li>
<li><p>Wait for a code review from another Mesos developer via Review Board, address their feedback and upload updated patches until you receive a &ldquo;Ship It&rdquo; from a Mesos committer.</p>

<ol>
<li>If you don&rsquo;t receive any feedback, contact your shepherd to remind them. While the committers try their best to provide prompt feedback on proposed changes, they are busy and sometimes a patch gets overlooked.</li>
<li>When addressing feedback, adjust your existing commit(s) instead of creating new commits, otherwise <code>post-reviews.py</code> will create a new review (<code>git rebase -i</code> is your friend).</li>
<li>Review Board comments should be used for code-specific discussions, and JIRA comments for bigger-picture design discussions.</li>
<li>Always respond to each RB comment that you address directly (i.e. each comment can be responded to directly) with either &ldquo;Done.&rdquo; or a comment explaining how you addressed it.</li>
<li>If an issue has been raised in the review, please resolve the issue as &ldquo;Fixed&rdquo; or &ldquo;Dropped&rdquo;. If &ldquo;Dropped&rdquo; please add a comment explaining the reason. Also, if your fix warrants a comment (e.g., fixed differently than suggested by the reviewer) please add a comment.</li>
</ol>
</li>
<li><p>After consensus is reached on your JIRA/patch, you&rsquo;re review request will receive a &ldquo;Ship It!&rdquo; from a committer, and then a committer will commit your patch to the git repository. Congratulations and thanks for participating in our community!</p></li>
<li><p>The last step is to ensure that the necessary documentation gets created or updated so the whole world knows about your new feature or bug fix.</p></li>
</ol>


<h2>Style Guides</h2>

<ul>
<li>For patches to the core, we ask that you follow the <a href="/documentation/latest/./c++-style-guide/">Mesos C++ Style Guide</a>.</li>
</ul>


  </div>
</div>

  </div><!-- /.container -->
</div><!-- /.content -->

<hr>



    <!-- footer -->
    <div class="footer">
      <div class="container">
        <div class="col-md-4 social-blk">
          <span class="social">
            <a href="https://twitter.com/ApacheMesos"
              class="twitter-follow-button"
              data-show-count="false" data-size="large">Follow @ApacheMesos</a>
            <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
            <a href="https://twitter.com/intent/tweet?button_hashtag=mesos"
              class="twitter-hashtag-button"
              data-size="large"
              data-related="ApacheMesos">Tweet #mesos</a>
            <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
          </span>
        </div>

        <div class="col-md-8 trademark">
          <p>&copy; 2012-2017 <a href="http://apache.org">The Apache Software Foundation</a>.
            Apache Mesos, the Apache feather logo, and the Apache Mesos project logo are trademarks of The Apache Software Foundation.
          <p>
        </div>
      </div><!-- /.container -->
    </div><!-- /.footer -->

    <!-- JS -->
    <script src="//code.jquery.com/jquery-1.11.0.min.js" type="text/javascript"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js" type="text/javascript"></script>
  </body>
</html>
