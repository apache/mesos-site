<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Apache Mesos - Task State Reasons</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta property="og:locale" content="en_US"/>
    <meta property="og:type" content="website"/>
    <meta property="og:title" content="Apache Mesos"/>
    <meta property="og:site_name" content="Apache Mesos"/>
    <meta property="og:url" content="http://mesos.apache.org/"/>
    <meta property="og:image" content="http://mesos.apache.org/assets/img/mesos_logo_fb_preview.png"/>
    <meta property="og:description"
          content="Apache Mesos abstracts resources away from machines,
                   enabling fault-tolerant and elastic distributed systems
                   to easily be built and run effectively."/>

    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:site" content="@ApacheMesos"/>
    <meta name="twitter:title" content="Apache Mesos"/>
    <meta name="twitter:image" content="http://mesos.apache.org/assets/img/mesos_logo_fb_preview.png"/>
    <meta name="twitter:description"
          content="Apache Mesos abstracts resources away from machines,
                   enabling fault-tolerant and elastic distributed systems
                   to easily be built and run effectively."/>

    <link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
    <link rel="alternate" type="application/atom+xml" title="Apache Mesos Blog" href="/blog/feed.xml">
    <link href="../../../assets/css/main.css" rel="stylesheet" />


    <!-- Google Analytics Magic -->
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-20226872-1']);
    _gaq.push(['_setDomainName', 'apache.org']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
  </head>
  <body>
    <!-- magical breadcrumbs -->
    <div class="topnav">
      <div class="container">
        <ul class="breadcrumb">
          <li>
            <div class="dropdown">
              <a data-toggle="dropdown" href="#">Apache Software Foundation <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                <li><a href="http://www.apache.org">Apache Homepage</a></li>
                <li><a href="http://www.apache.org/licenses/">License</a></li>
                <li><a href="http://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
                <li><a href="http://www.apache.org/foundation/thanks.html">Thanks</a></li>
                <li><a href="http://www.apache.org/security/">Security</a></li>
              </ul>
            </div>
          </li>

          <li><a href="http://mesos.apache.org">Apache Mesos</a></li>
          <li><a href="/documentation/">Documentation</a></li>
        </ul><!-- /.breadcrumb -->
      </div><!-- /.container -->
    </div><!-- /.topnav -->

    <!-- navbar excitement -->
<div class="navbar navbar-default navbar-static-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#mesos-menu" aria-expanded="false">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/"><img src="/assets/img/mesos_logo.png" alt="Apache Mesos logo"/></a>
    </div><!-- /.navbar-header -->

    <div class="navbar-collapse collapse" id="mesos-menu">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="/getting-started/">Getting Started</a></li>
        <li><a href="/blog/">Blog</a></li>
        <li><a href="/documentation/latest/">Documentation</a></li>
        <li><a href="/downloads/">Downloads</a></li>
        <li><a href="/community/">Community</a></li>
      </ul>
    </div><!-- /#mesos-menu -->
  </div><!-- /.container -->
</div><!-- /.navbar -->

<div class="content">
  <div class="container">
    <div class="row-fluid">
  <div class="col-md-4">
    <h4>If you're new to Mesos</h4>
    <p>See the <a href="/getting-started/">getting started</a> page for more
       information about downloading, building, and deploying Mesos.</p>

    <h4>If you'd like to get involved or you're looking for support</h4>
    <p>See our <a href="/community/">community</a> page for more details.</p>
  </div>
  <div class="col-md-8">
    <h1>Task State Reasons</h1>

<p>Some TaskStatus messages will arrive with the <code>reason</code> field set to a value
that can allow frameworks to display better error messages and to implement
special behaviour for some of the reasons.</p>

<p>For most reasons, the <code>message</code> field of the TaskStatus message will give a
more detailed, human-readable error description.</p>

<p>Not all status updates will contain a reason.</p>

<h1>Guidelines for Framework Authors</h1>

<p>Frameworks that implement their own executors are free to set the reason field
on any status messages they produce.</p>

<p>Note that executors can not generally rely on the fact that the scheduler will
see the status update with the reason set by the executor, since only the
latest update for each different task state is stored and re-transmitted. See
in particular the description of <code>REASON_RECONCILIATION</code> below.</p>

<p>Most reasons describe conditions that can only be detected in the master or
agent code, and will accompany automatically generated status updates from
either of these.</p>

<p>For consistency with the existing usages of the different task reasons, we
recommend that executors restrict themselves to the following subset if they
use a non-default reason in their status updates.</p>

<table class="table table-striped">

<tr><td><code>     REASON_TASK_CHECK_STATUS_UPDATED
</code></td><td>   For executors that support running task checks, it is
                   recommended to generate a status update with this reason
                   every time the task check status changes, together with a
                   human-readable description of the change in
                   the <code> message </code> field.
</td></tr>


<tr><td><code>     REASON_TASK_HEALTH_CHECK_STATUS_UPDATED
</code></td><td>   For executors that support running task health checks, it
                   is recommended to generate a status update with this reason
                   every time the health check status changes, together with a
                   human-readable description of the change in
                   the <code> message </code> field.
<strong>           Note:
</strong>          The built-in executors additionally send an update with
                   this reason every time a health check is unhealthy.
</td></tr>


<tr><td><code>     REASON_TASK_INVALID
</code></td><td>   For executors that implement their own task validation
                   logic, this reason can be used when the validation check
                   fails, together with a human-readable description of the
                   failed check in the <code> message </code> field.
</td></tr>


<tr><td><code>     REASON_TASK_UNAUTHORIZED
</code></td><td>   For executors that implement their own authorization logic,
                   this reason can be used when authorization fails, together
                   with a human-readable description in
                   the <code> message </code> field.
</td></tr></table>


<h1>Reference of Reasons Currently Used in Mesos</h1>

<h2>Deprecated Reasons</h2>

<p>The reason <code>REASON_COMMAND_EXECUTOR_FAILED</code> is deprecated and will be removed
in the future. It should not be referenced by newly written code.</p>

<h2>Unused Reasons</h2>

<p>The reasons <code>REASON_CONTAINER_LIMITATION</code>, <code>REASON_INVALID_FRAMEWORKID</code>,
<code>REASON_SLAVE_UNKNOWN</code>, <code>REASON_TASK_UNKNOWN</code> and
<code>REASON_EXECUTOR_UNREGISTERED</code> are not used as of Mesos 1.4.</p>

<h2>Reasons for Terminal Status Updates</h2>

<p>For these status updates, the reason indicates <em>why</em> the task state changed.
Typically, a given reason will always appear together
with the same state.</p>

<p>Typically they are generated by mesos when an error occurs that prevents
the executor from sending its own status update messages.</p>

<p>Below, a partition-aware framework means a framework which has the
<code>Capability::PARTITION_AWARE</code> capability bit set in its <code>FrameworkInfo</code>.
Messages generated on the master will have the <code>source</code> field set to
<code>SOURCE_MASTER</code> and messages generated on the agent will have it set
to <code>SOURCE_AGENT</code> in the v1 API or <code>SOURCE_SLAVE</code> in the v0 API.</p>

<p>As of Mesos 1.4, the following reasons are being used.</p>

<h3>For state <code>TASK_FAILED</code></h3>

<h4>In status updates generated on the agent:</h4>

<table class="table table-striped">

<tr><td><code>     REASON_CONTAINER_LAUNCH_FAILED
</code></td><td>   The task could not be launched because its container failed
                   to launch.
</td></tr>


<tr><td><code>     REASON_CONTAINER_LIMITATION_MEMORY
</code></td><td>   The container in which the task was running exceeded its
                   memory allocation.
</td></tr>


<tr><td><code>     REASON_CONTAINER_LIMITATION_DISK
</code></td><td>   The container in which the task was running exceeded its
                   disk quota.
</td></tr>


<tr> <td><code>    REASON_IO_SWITCHBOARD_EXITED
</code></td><td>   The I/O switchboard server terminated unexpectedly.
</td></tr>


<tr><td><code>     REASON_EXECUTOR_REGISTRATION_TIMEOUT
</code></td><td>   The executor for this task didn't register with the agent
                   within the allowed time limit.
</td></tr>


<tr><td><code>     REASON_EXECUTOR_REREGISTRATION_TIMEOUT
</code></td><td>   The executor for this task lost connection and didn't
                   reregister within the allowed time limit.
</td></tr>


<tr><td><code>     REASON_EXECUTOR_TERMINATED
</code></td><td>   The tasks' executor terminated abnormally, and no more
                   specific reason could be determined.
</td></tr></table>


<h3>For state <code>TASK_KILLED</code></h3>

<h4>In status updates generated on the master:</h4>

<table class="table table-striped">

<tr><td><code>     REASON_FRAMEWORK_REMOVED
</code></td><td>   The framework to which this task belonged was removed.
<br/><strong>      Note:
</strong>          The status update will be sent out before the task is
                   actually killed.
</td></tr>
<tr><td><code>     REASON_TASK_KILLED_DURING_LAUNCH
</code></td><td>   This task, or a task within this task group, was killed
                   before delivery to the agent.
</td></tr></table>


<h4>In status updates generated on the agent:</h4>

<table class="table table-striped">

<tr><td><code>     REASON_TASK_KILLED_DURING_LAUNCH
</code></td><td>   This task, or a task within this task group, was killed
                   before delivery to the executor.
<br/><strong>      Note:
</strong>          Prior to version 1.5, the agent would in this situation
                   sometimes send status updates with reason set
                   to <code> REASON_EXECUTOR_UNREGISTERED </code> and
                   sometimes without any reason set, depending on details of
                   the timing of the executor launch and the kill command.
</td></tr></table>


<h3>For state <code>TASK_ERROR</code></h3>

<h4>In status updates generated on the master:</h4>

<table class="table table-striped">

<tr><td><code>     REASON_TASK_INVALID
</code></td><td>   Task or resource validation checks failed.
</td></tr>


<tr><td><code>     REASON_TASK_GROUP_INVALID
</code></td><td>   Task group or resource validation checks failed.
</td></tr>


<tr><td><code>     REASON_TASK_UNAUTHORIZED
</code></td><td>   Task authorization failed on the master.
</td></tr>


<tr><td><code>     REASON_TASK_GROUP_UNAUTHORIZED
</code></td><td>   Task group authorization failed on the master.
</td></tr></table>


<h4>In status updates generated on the agent:</h4>

<table class="table table-striped">

<tr><td><code>     REASON_TASK_UNAUTHORIZED
</code></td><td>   Task authorization failed on the agent.
</td></tr>


<tr><td><code>     REASON_TASK_GROUP_UNAUTHORIZED
</code></td><td>   Task group authorization failed on the agent.
</td></tr></table>


<h3>For state <code>TASK_LOST</code></h3>

<h4>In status updates generated on the master:</h4>

<table class="table table-striped">

<tr><td rowspan="2">
<code>             REASON_SLAVE_DISCONNECTED
</code></td><td>   The agent on which the task was running disconnected, and
                   didn't reconnect in time.
<br/><strong>      Note:
</strong>          For partition-aware frameworks, the state will
                   be <code> TASK_DROPPED </code> instead
</td></tr>
<tr><td>           The task was part of an accepted offer, but the agent
                   sending the offer disconnected in the meantime.
<br/><strong>      Note:
</strong>          For partition-aware frameworks, the state will
                   be <code> TASK_DROPPED </code> instead.
</td></tr>


<tr><td><code>     REASON_MASTER_DISCONNECTED
</code></td><td>   The task was part of an accepted offer which couldn't be
                   sent to the master, because it was disconnected.
<br/><strong>      Note:
</strong>          For partition-aware frameworks, the state will
                   be <code> TASK_DROPPED </code> instead.
<br/><strong>      Note:
</strong>          Despite the source being set to <code> SOURCE_MASTER </code>,
                   the message is not sent from the master but locally from
                   the scheduler driver.
<strong>           Note:
</strong>          This reason is only used in the v0 API.
</td></tr>


<tr><td rowspan="3">
<code>             REASON_SLAVE_REMOVED
</code></td><td>   The agent on which the task was running was removed.
</td></tr>
<tr><td>           The task was part of an accepted offer, but the agent
                   sending the offer was disconnected in the meantime.
<br/><strong>      Note:
</strong>          For partition-aware frameworks, the state will be
                   to <code> TASK_DROPPED </code> instead.
</td></tr>
<tr><td>           The agent on which the task was running was marked
                   unreachable.
<br/><strong>      Note:
</strong>          For partition-aware frameworks, the state will
                   be <code> TASK_UNREACHABLE </code> instead.
</td></tr>


<tr><td><code>     REASON_RESOURCES_UNKNOWN
</code></td><td>   The task was part of an accepted offer which used
                   checkpointed resources that are not known to the master.
<br/><strong>      Note:
</strong>          For partition-aware frameworks, the state will
                   be <code> TASK_DROPPED </code> instead.
</td></tr></table>


<h4>In status updates generated on the agent:</h4>

<table class="table table-striped">

<tr><td><code>     REASON_SLAVE_RESTARTED
</code></td><td>   The task was launched during an agent restart, and never
                   got forwarded to the executor.
<br/><strong>      Note:
</strong>          For partition-aware frameworks, the state will
                   be <code> TASK_DROPPED </code> instead.
</td></tr>


<tr><td><code>     REASON_CONTAINER_PREEMPTED
</code></td><td>   The container in which the task was running was pre-empted
                   by a QoS correction.
<br/><strong>      Note:
</strong>          For partition-aware frameworks, the state will be changed
                   to <code> TASK_GONE </code> instead.
</td></tr>


<tr><td><code>     REASON_CONTAINER_UPDATE_FAILED
</code></td><td>   The container in which the task was running was discarded
                   because a resource update failed.
<br/><strong>      Note:
</strong>          For partition-aware frameworks, the state will
                   be <code> TASK_GONE </code> instead.
</td></tr>


<tr><td><code>     REASON_EXECUTOR_TERMINATED
</code></td><td>   The executor which was supposed to execute this task was
                   already terminated, or the agent receives an instruction to
                   kill the task before the executor was started.
<br/><strong>      Note:
</strong>          For partition-aware frameworks, the state will
                   be <code> TASK_DROPPED </code> instead.
</td></tr>


<tr><td><code>     REASON_GC_ERROR
</code></td><td>   A directory to be used by this task was scheduled for GC
                   and it could not be unscheduled.
<br/><strong>      Note:
</strong>          For partition-aware frameworks, the state will
                   be <code> TASK_DROPPED </code> instead.
</td></tr>


<tr><td><code>     REASON_INVALID_OFFERS
</code></td><td>   This task belonged to an accepted offer that didn't pass
                   validation checks.
<br/><strong>      Note:
</strong>          For partition-aware frameworks, the state will
                   be <code> TASK_DROPPED </code> instead.
</td></tr></table>


<h3>For state <code>TASK_DROPPED</code>:</h3>

<h4>In status updates generated on the master:</h4>

<table class="table table-striped">

<tr><td><code>     REASON_SLAVE_DISCONNECTED
</code></td><td>   See <code> TASK_LOST </code>
</td></tr>


<tr><td><code>     REASON_SLAVE_REMOVED
</code></td><td>   See <code> TASK_LOST </code>
</td></tr>


<tr><td><code>     REASON_RESOURCES_UNKNOWN
</code></td><td>   See <code> TASK_LOST </code>
</td></tr></table>


<h4>In status updates generated on the agent:</h4>

<table class="table table-striped">

<tr><td><code>     REASON_SLAVE_RESTARTED
</code></td><td>   See <code> TASK_LOST </code>
</td></tr>


<tr><td><code>     REASON_GC_ERROR
</code></td><td>   See <code> TASK_LOST </code>
</td></tr>


<tr><td><code>     REASON_INVALID_OFFERS
</code></td><td>   See <code> TASK_LOST </code>
</td></tr></table>


<h3>For state <code>TASK_UNREACHABLE</code>:</h3>

<h4>In status updates generated on the master:</h4>

<table class="table table-striped">

<tr><td><code>     REASON_SLAVE_REMOVED
</code></td><td>   See <code> TASK_LOST <code>
</td></tr></table>


<h3>For state <code>TASK_GONE</code></h3>

<h4>In status updates generated on the agent:</h4>

<table class="table table-striped">

<tr><td><code>     REASON_CONTAINER_UPDATE_FAILED
</code></td><td>   See <code> TASK_LOST </code>
</td></tr>

<tr><td><code>     REASON_CONTAINER_PREEMPTED
</code></td><td>   See <code> TASK_LOST </code>
</td></tr>

<tr><td><code>     REASON_EXECUTOR_PREEMPTED
</code></td><td>   Renamed to <code> REASON_CONTAINER_PREEMPTED </code> in
                   Mesos 0.26.
</td></tr></table>


<h2>Reasons for Non-Terminal Status Updates</h2>

<p>These reasons do not cause a state change, and will be sent along with the
last known state of the task. The reason field indicates <em>why</em> the status
update was sent.</p>

<table class="table table-striped">

<tr><td><code>     REASON_RECONCILIATION
</code></td><td>   A framework requested implicit or explicit reconciliation
                   for this task.
<br/><strong>      Note:
</strong>          Status updates with this reason are not the original ones,
                   but rather a modified copy that is re-sent from the master.
                   In particular, the original <code> data </code>
                   and <code> message </code> fields are erased and the
                   original <code> reason </code> field is overwritten
                   by <code> REASON_RECONCILIATION </code>.
</td></tr>


<tr><td><code>     REASON_TASK_CHECK_STATUS_UPDATED
</code></td><td>   A task check notified the agent that its state changed.
<br/><strong>      Note:
</strong>          This reason is set by the executor, so for tasks that are
                   running with a custom executor, whether or not status
                   updates with this reasons are sent depends on that
                   executors implementation.
<strong>           Note:
</strong>          Currently, when using one of the built-in executors, this
                   reason is only used within status updates with task
                   state <code> TASK_RUNNING </code>.
</td></tr>


<tr><td><code>     REASON_TASK_HEALTH_CHECK_STATUS_UPDATED
</code></td><td>   A task health check notified the agent that its
                   state changed.
<br/><strong>      Note:
</strong>          This reason is set by the executor, so for tasks that are
                   running with a custom executor, whether or not status
                   updates with this reasons are sent depends on that
                   executors implementation.
<strong>           Note:
</strong>          Currently, when using one of the built-in executors, this
                   reason is only used within status updates with task
                   state <code> TASK_RUNNING </code>.
</td></tr>


<tr><td><code>     REASON_SLAVE_REREGISTERED
</code></td><td>   The agent on which the task was running has reregistered
                   after being marked unreachable by the master.
<br/><strong>      Note:
</strong>          Due to garbage collection of the unreachable and gone agents
                   in the registry and master state Mesos also sends such status
                   updates for agents unknown to the master.
<strong>           Note:
</strong>          Status updates with this reason are modified copies re-sent
                   by the master which reflect the states of the tasks reported
                   by the agent upon its re-registration. See comments for
                   <code> REASON_RECONCILIATION </code>.
</td></tr></table>


  </div>
</div>

  </div><!-- /.container -->
</div><!-- /.content -->

<hr>



    <!-- footer -->
    <div class="footer">
      <div class="container">

        <div class="col-md-3">
            <a  href="https://www.apache.org/events/current-event.html">
              <img src="https://www.apache.org/events/current-event-234x60.png"/>
            </a>
        </div>

        <div class="col-md-3 social-blk">
          <span class="social">
            <a href="https://twitter.com/ApacheMesos"
              class="twitter-follow-button"
              data-show-count="false" data-size="large">Follow @ApacheMesos</a>
            <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
            <a href="https://twitter.com/intent/tweet?button_hashtag=mesos"
              class="twitter-hashtag-button"
              data-size="large"
              data-related="ApacheMesos">Tweet #mesos</a>
            <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
          </span>
        </div>

        <div class="col-md-6 trademark">
          <p>&copy; 2012-2020 <a href="http://apache.org">The Apache Software Foundation</a>.
            Apache Mesos, the Apache feather logo, and the Apache Mesos project logo are trademarks of The Apache Software Foundation.
          <p>
        </div>

      </div><!-- /.container -->
    </div><!-- /.footer -->

    <!-- JS -->
    <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js"></script>

    <!-- Inject anchors for all headings on the page, see https://www.bryanbraun.com/anchorjs. -->
    <script type="text/javascript">
    anchors.options = {
      placement: 'right',
      ariaLabel: 'Permalink',
    };

    // The default is to not add anchors to h1, but we have pages with multiple h1 headers,
    // and we do want to put anchors on those.
    anchors.add('h1, h2, h3, h4, h5, h6');
    </script>
  </body>
</html>
